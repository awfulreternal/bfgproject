from aiogram import Dispatcher, types
from commands.db import get_name, getstatus, url_name
from commands.basic.status.db import *
from commands.main import win_luser
import config as cfg


async def status_list(message):
    name = await get_name(message.from_user.id)
    await message.answer(f'''{name}, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –≤ –∏–≥—Ä–µ:

1Ô∏è‚É£ Standart VIP:
- –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –±–∞–Ω–∫–µ
- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à–∞–Ω—Å –ø–æ–±–µ–¥—ã –≤ –∏–≥—Ä–∞—Ö
- –£–≤–µ–ª–∏—á–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –¥–µ–ø–æ–∑–∏—Ç–µ –¥–æ 8%
- –£–º–µ–Ω—å—à–µ–Ω –Ω–∞–ª–æ–≥ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–æ 4.5%
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º –¥–æ 300.000.000.000.000$ –≤ —Å—É—Ç–∫–∏
- –ö—Ä–∞—Å–∏–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–π –Ω–∏–∫
- –í—Ä–µ–º—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞ —É–º–µ–Ω—å—à–µ–Ω–æ –≤ –¥–≤–∞ —Ä–∞–∑–∞
- –£–≤–µ–ª–∏—á–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –¥–æ 25
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã—Ö –∫–µ–π—Å–æ–≤ –¥–æ 20

2Ô∏è‚É£ Gold VIP:
- –£–≤–µ–ª–∏—á–µ–Ω —à–∞–Ω—Å –≤ –∏–≥—Ä–∞—Ö
- –£–≤–µ–ª–∏—á–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –¥–µ–ø–æ–∑–∏—Ç–µ –¥–æ 10%
- –£–º–µ–Ω—å—à–µ–Ω –Ω–∞–ª–æ–≥ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–æ 3.5%
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ—â—ë –¥–ª–∏–Ω–µ–µ –Ω–∏–∫
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∑–æ–ª–æ—Ç–æ–π –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º –¥–æ 750.000.000.000.000$ –≤ —Å—É—Ç–∫–∏
- –£–≤–µ–ª–∏—á–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –¥–æ 50
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã—Ö –∫–µ–π—Å–æ–≤ –¥–æ 40

3Ô∏è‚É£ Platinum VIP:
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º –¥–æ 1.000.000.000.000.000$ –≤ —Å—É—Ç–∫–∏
- –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–∏–≥—Ä—ã—à–∞ –≤ –∏–≥—Ä–∞—Ö
- –£–≤–µ–ª–∏—á–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –¥–µ–ø–æ–∑–∏—Ç–µ –¥–æ 12%
- –£–º–µ–Ω—å—à–µ–Ω –Ω–∞–ª–æ–≥ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–æ 3%
- –£–≤–µ–ª–∏—á–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –¥–æ 75
- –ö—Ä–∞—Å–∏–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- –û–ø—ã—Ç –∏ –¥–æ–±—ã—á–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –≤ –¥–≤–∞ —Ä–∞–∑–∞
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã—Ö –∫–µ–π—Å–æ–≤ –¥–æ 60

4Ô∏è‚É£ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:
- –í—ã–¥–∞—á–∞ –¥–µ–Ω–µ–≥ –≤ —Å—É—Ç–∫–∏ - 150.000.000.000.000
- –£–≤–µ–ª–∏—á–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –≤ –¥–µ–ø–æ–∑–∏—Ç–µ –¥–æ 15%
- –£–º–µ–Ω—å—à–µ–Ω –Ω–∞–ª–æ–≥ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ –¥–µ–ø–æ–∑–∏—Ç–∞ –¥–æ 2.5%
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –¥–æ 100
- –ö—Ä–∞—Å–∏–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º –¥–æ 30.000.000.000.000.000$ –≤ —Å—É—Ç–∫–∏
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã—Ö –∫–µ–π—Å–æ–≤ –¥–æ 250''')


async def donat_list(message):
    user_id = message.from_user.id
    url = await url_name(user_id)
    ecoins = await getecoins(user_id)
    adm_us = cfg.admin_username.replace('@', '')
    await message.answer(f'''{url}, –Ω–∞—à –º–∞–≥–∞–∑–∏–Ω:

üíµ –¢–µ–∫—É—â–∏–π –∫—É—Ä—Å: 1 RUB = 1 B-Coin
üí∏ –í–∞–ª—é—Ç–∞: 1 B-Coin –º–æ–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –Ω–∞ 2.000.000.000.000.000$

ü™ô –û–±–º–µ–Ω –∫–æ–∏–Ω–æ–≤ –Ω–∞ –≤–∞–ª—é—Ç—É: –û–±–º–µ–Ω—è—Ç—å [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

üèÜ –ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏:
1Ô∏è‚É£ Standart VIP | 250 B-Coin
2Ô∏è‚É£ Gold VIP | 500 B-Coin
3Ô∏è‚É£ Platinum VIP | 750 B-Coin
4Ô∏è‚É£ Admin Status | 1.500 B-Coin

üîù–ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—é [–Ω–æ–º–µ—Ä]

‚ö°Ô∏è –≠–Ω–µ—Ä–≥–∏—è:
    - 20 —ç–Ω–µ—Ä–≥–∏–∏ | 15 B-Coin 
     üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å —Ñ–ª—è–≥—É 1
    - 60 —ç–Ω–µ—Ä–≥–∏–∏ | 35 B-Coin
     üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å —Ñ–ª—è–≥—É 2

üöß –õ–∏–º–∏—Ç:
 - 350.000.000.000.000 | 100 B-Coin
üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å –ª–∏–º–∏—Ç 1

- 3e18 | 1000 B-Coin
üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å –ª–∏–º–∏—Ç 2

- 1e20 | 3000 B-Coin
üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å –ª–∏–º–∏—Ç 3

- 2e21 | 6500 B-Coin
üîù –ü–æ–∫—É–ø–∫–∞: –ö—É–ø–∏—Ç—å –ª–∏–º–∏—Ç 4

üí∞–í–∞—à –±–∞–ª–∞–Ω—Å: {ecoins} B-Coin
üì≤ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å: <a href="t.me/{adm_us}">{cfg.admin_username}</a>''', disable_web_page_preview=True)


async def my_status(message):
    user_id = message.from_user.id
    url = await url_name(user_id)
    status = await getstatus(user_id)
    privileges = {
        0: "–∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é –≤—ã –Ω–µ –≤–ª–∞–¥–µ–µ—Ç–µ –∫–∞–∫–∏–º–∏ –ª–∏–±–æ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è–º–∏",
        1: "üèÜ –°—Ç–∞—Ç—É—Å: Standart VIP\nüè¶ –ü—Ä–æ—Ü–µ–Ω—Ç –≤–∫–ª–∞–¥–∞: 8%\nüí∏ –õ–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏: 300.000.000.000.000$/—Å—É—Ç–∫–∏",
        2: "üèÜ –°—Ç–∞—Ç—É—Å: Gold VIP\nüè¶ –ü—Ä–æ—Ü–µ–Ω—Ç –≤–∫–ª–∞–¥–∞: 10%\nüí∏ –õ–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏: 750.000.000.000.000$/—Å—É—Ç–∫–∏",
        3: "üèÜ –°—Ç–∞—Ç—É—Å: Platinum VIP\nüè¶ –ü—Ä–æ—Ü–µ–Ω—Ç –≤–∫–ª–∞–¥–∞: 12%\nüí∏ –õ–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏: 1.000.000.000.000.000$/—Å—É—Ç–∫–∏",
        4: "üèÜ –°—Ç–∞—Ç—É—Å: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\nüè¶ –ü—Ä–æ—Ü–µ–Ω—Ç –≤–∫–ª–∞–¥–∞: 15%\nüí∏ –õ–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏: 30.000.000.000.000.000$/—Å—É—Ç–∫–∏"
    }

    await message.answer(f'{url}, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏:\n{privileges[status]}\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –ø–ª—é—à–∫–∞—Ö –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤–≤–µ–¥—è –∫–æ–º–∞–Ω–¥—É "–°—Ç–∞—Ç—É—Å—ã"')


async def buy_status(message: types.Message):
    user_id = message.from_user.id
    url = await url_name(user_id)
    ecoins = await getecoins(user_id)
    rwin, rloser = await win_luser()
    status = await getstatus(user_id)

    try:
        u = int(message.text.split()[2])
    except:
        await message.answer(f'{url}, –≤—ã –Ω–µ –≤–≤–µ–ª–∏ —á–∏—Å–ª–æ –∏–º—É—â–µ—Å—Ç–≤–∞ –∏–ª–∏ –ø—Ä–∏–≤–µ–ª–µ–≥–∏–∏ –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å {rloser}')
        return

    sttaus_list = {
        1: ("Standart VIP", 250),
        2: ("Gold VIP", 500),
        3: ("Platinum VIP", 750),
        4: ("Admin Status", 1500)
    }

    data = sttaus_list.get(u, 'no')
    if data == 'no':
        await message.answer(f'{url}, –¥–∞–Ω–Ω–æ–≥–æ –¥–æ–Ω–∞—Ç–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω—É—é –≤–∞–º–∏ —Ü–∏—Ñ—Ä—É.')
        return

    if ecoins < data[1]:
        await message.answer(f'{url},–∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é —É –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ B-Coins –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –¥–∞–Ω–Ω–æ–π –ø—Ä–∏–≤–µ–ª–µ–≥–∏–∏, '
                             f'—á—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É "–î–æ–Ω–∞—Ç" {rloser}')
        return

    if status > u:
        await message.answer(f'{url}, —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —ç—Ç–æ—Ç –∏–ª–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Å—Ç–∞—Ç—É—Å {rwin}.')
        return

    await buy_status_db(user_id, data[1], u)
    await message.answer(f'{url}, –≤—ã —É—Å–ø–µ—à–∫–æ –∫—É–ø–∏–ª–∏ —Å—Ç–∞—Ç—É—Å "{data[0]}" –∑–∞ {data[1]} B-Coins {rwin}.')


async def exchange_value(message: types.Message):
    user_id = message.from_user.id
    url = await url_name(user_id)
    ecoins = await getecoins(user_id)
    rwin, rloser = await win_luser()

    try:
        u = int(message.text.split()[1])
    except:
        u = 1

    if u > 1000 or u <= 0:
        return

    if ecoins < u:
        await message.answer(f'–ù–∞ —Ç–≤–æ—ë–º —Å—á–µ—Ç—É {ecoins} B-Coins, —á—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω–∏—Ç—å –≤–≤–µ–¥–∏—Ç–µ - –î–æ–Ω–∞—Ç {rloser}')
        return

    summ = u * 2000000000000000  # —Å—É–º–º–∞ –¥–µ–Ω–µ–≥ –∑–∞ 1 B-Coin
    summ2 = '{:,}'.format(summ).replace(',', '.')

    await exchange_value_db(user_id, summ, u)
    await message.answer(f'{url}, –≤—ã –æ–±–º–µ–Ω—è–ª–∏ {u} B-Coins –Ω–∞ {summ2}$ {rwin}')


async def buy_limit(message: types.Message):
    user_id = message.from_user.id
    url = await url_name(user_id)
    ecoins = await getecoins(user_id)
    rwin, rloser = await win_luser()

    try:
        u = int(message.text.split()[2])
    except:
        await message.answer(f'{url}, –≤—ã –Ω–µ –≤–≤–µ–ª–∏ —á–∏—Å–ª–æ –∏–º—É—â–µ—Å—Ç–≤–∞ –∏–ª–∏ –ø—Ä–∏–≤–µ–ª–µ–≥–∏–∏ –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å {rloser}')
        return

    # –Ω–æ–º–µ—Ä –ª–∏–º–∏—Ç–∞: (–ª–∏–º–∏—Ç, —Å—Ç–æ–∏–º–æ—Å—Ç—å)
    limit_list = {
        1: (350000000000000, 100),
        2: (3000000000000000000, 1000),
        3: (100000000000000000000, 3000),
        4: (2000000000000000000000, 6500),
    }

    data = limit_list.get(u, 'no')

    if data == 'no':
        return

    if ecoins < data[1]:
        await message.answer(f'{url}, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é —É –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ B-Coins –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–∏–º–∏—Ç–∞,'
                             f' —á—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É "–î–æ–Ω–∞—Ç" {rloser}')
        return

    summ2 = '{:,}'.format(data[0]).replace(',', '.')

    await buy_limit_db(user_id, data[0], data[1])
    await message.answer(f'{url}, –≤—ã —É–≤–µ–ª–∏—á–∏–ª–∏ —Å–≤–æ–π –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ {summ2}$ –∑–∞ {data[1]} B-Coins {rwin}')


def reg(dp: Dispatcher):
    dp.register_message_handler(donat_list, lambda message: message.text.lower().startswith('–¥–æ–Ω–∞—Ç'))
    dp.register_message_handler(status_list, lambda message: message.text.lower().startswith('—Å—Ç–∞—Ç—É—Å—ã'))
    dp.register_message_handler(my_status, lambda message: message.text.lower().startswith('–º–æ–π —Å—Ç–∞—Ç—É—Å'))
    dp.register_message_handler(buy_status, lambda message: message.text.lower().startswith('–∫—É–ø–∏—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—é'))
    dp.register_message_handler(exchange_value, lambda message: message.text.lower().startswith('–æ–±–º–µ–Ω—è—Ç—å'))
    dp.register_message_handler(buy_limit, lambda message: message.text.lower().startswith('–∫—É–ø–∏—Ç—å –ª–∏–º–∏—Ç'))